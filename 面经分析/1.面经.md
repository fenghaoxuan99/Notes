# MySQL B+树索引与磁盘IO的关系

在MySQL的InnoDB存储引擎中，B+树索引是主要的索引结构。关于"走一层就是一次磁盘IO"的说法，需要从以下几个方面理解：

## B+树结构特点

1. **多叉树结构**：B+树是一个多叉平衡树，每个节点可以包含多个键值和指针
2. **层级结构**：由根节点、非叶子节点(内部节点)和叶子节点组成
3. **节点大小**：通常设计为与磁盘页大小匹配(如16KB)

## 为什么每层可能对应一次磁盘IO

1. **节点存储位置**：
   - B+树的每个节点通常存储在磁盘的不同页中
   - 访问不同节点需要从磁盘读取不同的页

2. **查找过程**：
   - 从根节点开始查找
   - 在节点内部进行二分查找确定下一层节点
   - 访问下一层节点需要加载新的磁盘页

3. **IO成本**：
   - 每次加载一个新节点(页)就需要一次磁盘IO
   - 树的层级决定了查找时需要的最多磁盘IO次数

## 实际优化

实际上，现代数据库系统有以下优化：

1. **缓存机制**：InnoDB缓冲池会缓存热点数据，减少实际IO
2. **预读取**：可能预读取相邻节点
3. **节点合并**：相邻叶子节点可能在同一页中

## 典型场景

对于高度为3的B+树(常见于千万级数据表)：
- 根节点常驻内存(0次IO)
- 访问第二层(1次IO)
- 访问叶子节点(1次IO)
- 总共约1-2次实际磁盘IO
