
### **网络模型**
1. **OSI模型和TCP/IP模型的区别**  
   - **OSI七层模型**：应用层（统一接口）、表示层（数据格式转换）、会话层（通信会话管理）、传输层（端到端传输）、网络层（路由/转发）、数据链路层（帧封装/差错检测）、物理层（物理传输）。  
   - **TCP/IP四层模型**：应用层（HTTP/SMTP等）、传输层（TCP/UDP）、网络层（IP协议）、链路层（物理比特传输）。  

2. **TCP和IP分别位于哪一层？**  
   - TCP在传输层，IP在网络层。

---

### **应用层协议**
1. **应用层常见协议**  
   HTTP、HTTPS、CDN、DNS、FTP。  

2. **HTTP报文结构**  
   - **请求报文**：请求行（方法/URL/版本）、请求头、空行、请求体（可选）。  
   - **响应报文**：状态行（版本/状态码）、响应头、空行、响应体。  

3. **HTTP状态码**  
   - `200`：成功；`301`：永久重定向；`302`：临时重定向；`404`：资源不存在；`405`：方法不支持；`500`：服务器内部错误；`502`：网关无效响应；`504`：网关超时。  

4. **GET和POST的区别**  
   - GET：安全幂等，参数在URL中，长度受限，可缓存。  
   - POST：非幂等，数据在请求体，长度不限，不缓存。  

5. **HTTP长连接（Keep-Alive）**  
   复用同一TCP连接发送/接收多个HTTP请求，减少连接开销。  

6. **HTTP默认端口**  
   HTTP为80，HTTPS为443。  

7. **HTTP断点续传**  
   客户端通过`Range`头指定下载范围，服务端返回`206 Partial Content`及`Content-Range`。  

8. **HTTP与HTTPS的区别**  
   - HTTP明文传输，HTTPS通过SSL/TLS加密。  
   - HTTPS需CA证书，默认端口443，建立连接需额外TLS握手。  

9. **HTTPS握手过程**  
   1. 客户端发送`ClientHello`（协议版本/随机数/密码套件）。  
   2. 服务端回复`ServerHello`（确认版本/随机数/证书）。  
   3. 客户端验证证书，发送`pre-master key`（用公钥加密）。  
   4. 双方生成会话密钥，开始加密通信。  

10. **HTTP/1.1 vs HTTP/2**  
    - HTTP/2：头部压缩、二进制帧、多路复用（解决队头阻塞）、服务端推送。  

---

### **DNS**
1. **DNS的作用**  
   将域名解析为IP地址的分布式系统。  
2. **域名层级结构**  
   根域 → 顶级域（如`.com`） → 权威域名服务器（如`server.com`）。  
3. **DNS解析流程**  
   客户端 → 本地DNS → 根DNS → 顶级DNS → 权威DNS → 返回IP。  
4. **DNS端口和协议**  
   默认端口53，底层使用UDP（低延迟/轻量级），丢包时回退TCP。  

---

### **会话管理**
1. **Cookie vs Session**  
   - **Cookie**：客户端存储，大小受限（4KB），安全性较低。  
   - **Session**：服务端存储，以Session ID标识，依赖Cookie传递ID。  
2. **JWT令牌**  
   - 无状态，包含Header（算法）、Payload（数据）、Signature（签名）。  
   - **优点**：适合分布式系统；**缺点**：令牌泄露需黑名单机制撤销。  
3. **HTTP无状态性**  
   HTTP本身无状态，通过Cookie/Session实现状态保持。  

---

### **传输层协议**
#### **TCP**
1. **TCP头部关键字段**  
   序列号（解决乱序）、确认号（解决丢包）、控制位（ACK/SYN/FIN/RST）。  
2. **三次握手过程**  
   1. 客户端发送`SYN`（序列号`x`）。  
   2. 服务端回复`SYN-ACK`（序列号`y`，确认号`x+1`）。  
   3. 客户端发送`ACK`（确认号`y+1`）。  
   **目的**：防止历史连接、同步序列号、避免资源浪费。  
3. **四次挥手过程**  
   1. 客户端发送`FIN`。  
   2. 服务端回复`ACK`。  
   3. 服务端发送`FIN`。  
   4. 客户端回复`ACK`，等待`2MSL`后关闭。  
   **TIME_WAIT作用**：确保最后一个`ACK`到达，防止旧连接数据干扰。  
4. **拥塞控制算法**  
   - 慢启动：指数增长拥塞窗口（`cwnd`）。  
   - 拥塞避免：`cwnd`线性增长。  
   - 快重传/快恢复：收到3个重复`ACK`时减半`cwnd`并重传。  
5. **粘包问题解决**  
   - 固定长度、特殊字符边界（如`\r\n`）、自定义结构（长度+数据）。  

#### **UDP**
1. **TCP vs UDP**  
   - TCP：面向连接、可靠传输（重传/流量控制）、有序。  
   - UDP：无连接、尽力交付、无序、低开销。  

---

### **网络场景问题**
1. **访问百度首页的网络流程**  
   URL解析 → DNS查询 → TCP握手 → TLS握手（HTTPS） → HTTP请求 → 渲染页面。  
2. **服务器大量TIME_WAIT的原因**  
   - HTTP短连接、长连接超时、长连接请求数达上限。  
3. **服务器Ping不通但HTTP通**  
   防火墙可能禁止ICMP（Ping），但允许TCP（HTTP）。  

---

### **网络攻击**
1. **DDoS攻击**  
   通过僵尸网络淹没目标流量。防御：流量清洗、CDN、限流。  
2. **SQL注入**  
   恶意SQL篡改查询。防御：参数化查询、输入过滤。  
3. **CSRF攻击**  
   伪造用户请求。防御：验证`Referer`、添加Token。  
4. **XSS攻击**  
   注入恶意脚本。防御：输入转义、CSP策略、`HttpOnly` Cookie。  
5. **DNS劫持**  
   篡改DNS响应指向恶意IP。防御：使用DNSSEC、HTTPS。  