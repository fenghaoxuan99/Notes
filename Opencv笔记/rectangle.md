
# OpenCV `rectangle()` å‡½æ•°è¯¦è§£

`rectangle()` æ˜¯ OpenCV ä¸­ç”¨äºåœ¨å›¾åƒä¸Šç»˜åˆ¶çŸ©å½¢çš„æ ¸å¿ƒå‡½æ•°ï¼Œæ‚¨æä¾›çš„ä»£ç å±•ç¤ºäº†å…¶å…¸å‹ç”¨æ³•ã€‚ä¸‹é¢æˆ‘å°†è¯¦ç»†è§£ææ¯ä¸ªå‚æ•°å’ŒåŠŸèƒ½ï¼š

## å‡½æ•°åŸå‹

```cpp
void cv::rectangle(
    InputOutputArray img,         // ç›®æ ‡å›¾åƒ
    Point pt1,                    // çŸ©å½¢å·¦ä¸Šè§’ç‚¹
    Point pt2,                    // çŸ©å½¢å³ä¸‹è§’ç‚¹
    const Scalar& color,          // çŸ©å½¢é¢œè‰²
    int thickness = 1,            // çº¿å®½
    int lineType = LINE_8,        // çº¿å‹
    int shift = 0                 // åæ ‡ç²¾åº¦
);
```

## å‚æ•°è¯¦è§£ï¼ˆé’ˆå¯¹æ‚¨çš„ä»£ç ï¼‰

### 1. `frame` - ç›®æ ‡å›¾åƒ
- **ç±»å‹**: `cv::Mat`
- **ä½œç”¨**: è¦åœ¨å…¶ä¸Šç»˜åˆ¶çŸ©å½¢çš„å›¾åƒ
- **è¦æ±‚**: é€šå¸¸æ˜¯ 3 é€šé“ (BGR) æˆ–å•é€šé“å›¾åƒ
- **æ³¨æ„**: å‡½æ•°ä¼šç›´æ¥ä¿®æ”¹è¿™ä¸ªå›¾åƒ

### 2. `Point(rect_x, rect_y)` - çŸ©å½¢å·¦ä¸Šè§’
- **ç±»å‹**: `cv::Point`
- **ä½œç”¨**: å®šä¹‰çŸ©å½¢çš„èµ·å§‹ç‚¹ (å·¦ä¸Šè§’åæ ‡)
- **åæ ‡ç³»ç»Ÿ**: å›¾åƒå·¦ä¸Šè§’ä¸ºåŸç‚¹ (0,0)ï¼Œx å‘å³å¢åŠ ï¼Œy å‘ä¸‹å¢åŠ 
- **ç¤ºä¾‹**: `Point(100, 50)` è¡¨ç¤º x=100, y=50 çš„ä½ç½®

### 3. `Point(rect_x + 200, rect_y + rect_size)` - çŸ©å½¢å³ä¸‹è§’
- **ç±»å‹**: `cv::Point`
- **ä½œç”¨**: å®šä¹‰çŸ©å½¢çš„å¯¹è§’ç‚¹ (å³ä¸‹è§’åæ ‡)
- **è®¡ç®—æ–¹å¼**:
  - å®½åº¦: `200` åƒç´ 
  - é«˜åº¦: `rect_size` åƒç´ 
- **æ³¨æ„**: ç¡®ä¿åæ ‡åœ¨å›¾åƒèŒƒå›´å†…ï¼Œå¦åˆ™å¯èƒ½ç»˜åˆ¶ä¸å…¨

### 4. `Scalar(0, 255 * progress, 255 * (1 - progress))` - çŸ©å½¢é¢œè‰²
- **ç±»å‹**: `cv::Scalar`
- **ä½œç”¨**: å®šä¹‰çŸ©å½¢çš„é¢œè‰² (BGR æ ¼å¼)
- **é¢œè‰²åˆ†é‡**:
  - **è“è‰²(B)**: `0` (å›ºå®šä¸º0)
  - **ç»¿è‰²(G)**: `255 * progress` (æ ¹æ®è¿›åº¦å˜åŒ–)
  - **çº¢è‰²(R)**: `255 * (1 - progress)` (æ ¹æ®è¿›åº¦å˜åŒ–)
- **é¢œè‰²å˜åŒ–æ•ˆæœ**:
  - å½“ `progress = 0.0`: `Scalar(0, 0, 255)` â†’ çº¢è‰²   ğŸ”´
  - å½“ `progress = 0.5`: `Scalar(0, 128, 128)` â†’ é»„è‰² ğŸŸ¡
  - å½“ `progress = 1.0`: `Scalar(0, 255, 0)` â†’ ç»¿è‰²   ğŸŸ¢
- **åº”ç”¨åœºæ™¯**: å¸¸ç”¨äºè¡¨ç¤ºè¿›åº¦æ¡æˆ–çŠ¶æ€æŒ‡ç¤ºå™¨

### 5. `FILLED` - å¡«å……æ¨¡å¼
- **ä½œç”¨**: æŒ‡å®šçŸ©å½¢å†…éƒ¨å¡«å……æ–¹å¼
- **å¯é€‰å€¼**:
  - `FILLED` æˆ– `-1`: å®Œå…¨å¡«å……çŸ©å½¢å†…éƒ¨
  - æ­£æ•´æ•°: è¾¹æ¡†çº¿å®½ (åƒç´ )
- **é»˜è®¤å€¼**: `1` (1åƒç´ è¾¹æ¡†)
- **åœ¨æ‚¨ä»£ç ä¸­**: ä½¿ç”¨ `FILLED` è¡¨ç¤ºå®å¿ƒçŸ©å½¢

## å®Œæ•´åŠŸèƒ½è§£æ

æ‚¨æä¾›çš„ä»£ç åˆ›å»ºäº†ä¸€ä¸ª**åŠ¨æ€é¢œè‰²å˜åŒ–çš„å¡«å……çŸ©å½¢**ï¼š
1. ä½ç½®: ä» `(rect_x, rect_y)` å¼€å§‹
2. å°ºå¯¸: å®½åº¦ 200 åƒç´ ï¼Œé«˜åº¦ `rect_size` åƒç´ 
3. é¢œè‰²: æ ¹æ® `progress` å€¼åœ¨çº¢è‰²(0.0)åˆ°ç»¿è‰²(1.0)ä¹‹é—´æ¸å˜
4. æ ·å¼: å®Œå…¨å¡«å…… (æ— è¾¹æ¡†)

## å®é™…åº”ç”¨ç¤ºä¾‹

### è¿›åº¦æ¡å®ç°

```cpp
// åˆ›å»ºé»‘è‰²èƒŒæ™¯
Mat frame(480, 640, CV_8UC3, Scalar(0, 0, 0));

// è¿›åº¦å€¼ (0.0 - 1.0)
float progress = 0.75f; 

// è¿›åº¦æ¡ä½ç½®å’Œå°ºå¯¸
int bar_x = 50, bar_y = 200;
int bar_width = 500, bar_height = 40;

// ç»˜åˆ¶èƒŒæ™¯æ¡† (ç°è‰²è¾¹æ¡†)
rectangle(frame, 
          Point(bar_x, bar_y), 
          Point(bar_x + bar_width, bar_y + bar_height),
          Scalar(200, 200, 200), 
          2);

// ç»˜åˆ¶è¿›åº¦æ¡ (é¢œè‰²æ¸å˜)
rectangle(frame,
          Point(bar_x, bar_y),
          Point(bar_x + bar_width * progress, bar_y + bar_height),
          Scalar(0, 255 * progress, 255 * (1 - progress)),
          FILLED);
```

### å¯¹è±¡æ ‡è®°

```cpp
// æ£€æµ‹åˆ°çš„äººè„¸åŒºåŸŸ
Rect face_rect(150, 100, 120, 160);

// åœ¨å›¾åƒä¸Šç»˜åˆ¶ç»¿è‰²çŸ©å½¢æ ‡è®°
rectangle(frame,
          face_rect.tl(),      // å·¦ä¸Šè§’ç‚¹
          face_rect.br(),      // å³ä¸‹è§’ç‚¹
          Scalar(0, 255, 0),   // ç»¿è‰²
          2,                   // 2åƒç´ è¾¹æ¡†
          LINE_AA);            // æŠ—é”¯é½¿çº¿å‹
```

## é«˜çº§ç”¨æ³•

### 1. å¸¦é€æ˜åº¦çš„çŸ©å½¢

```cpp
// åˆ›å»ºçŸ©å½¢ROI
Mat roi = frame(Rect(100, 100, 300, 200));

// åˆ›å»ºå¸¦é€æ˜åº¦çš„è¦†ç›–å±‚
Mat overlay(roi.size(), CV_8UC3, Scalar(0, 150, 255));
double alpha = 0.3; // é€æ˜åº¦

// æ··åˆå åŠ 
addWeighted(overlay, alpha, roi, 1 - alpha, 0, roi);
```

### 2. åœ†è§’çŸ©å½¢

```cpp
// è‡ªå®šä¹‰åœ†è§’çŸ©å½¢å‡½æ•°
void roundedRect(Mat& img, Rect rect, Scalar color, int radius, int thickness) {
    // ç»˜åˆ¶å››ä¸ªè§’
    circle(img, rect.tl() + Point(radius, radius), radius, color, thickness);
    circle(img, Point(rect.x + rect.width - radius, rect.y + radius), radius, color, thickness);
    circle(img, Point(rect.x + radius, rect.y + rect.height - radius), radius, color, thickness);
    circle(img, rect.br() - Point(radius, radius), radius, color, thickness);
    
    // ç»˜åˆ¶å››æ¡è¾¹
    rectangle(img, Rect(rect.x + radius, rect.y, rect.width - 2*radius, rect.height), color, thickness);
    rectangle(img, Rect(rect.x, rect.y + radius, rect.width, rect.height - 2*radius), color, thickness);
}
```

## æ€§èƒ½æ³¨æ„äº‹é¡¹

1. **æ‰¹é‡ç»˜åˆ¶**: é¿å…å¤šæ¬¡è°ƒç”¨ `rectangle()`ï¼Œå°½é‡ä¸€æ¬¡ç»˜åˆ¶å¤šä¸ªå›¾å½¢
2. **ROIæ“ä½œ**: å¯¹å¤§å›¾åƒï¼Œå…ˆæå–ROIå†ç»˜åˆ¶å¯æé«˜æ€§èƒ½
3. **æŠ—é”¯é½¿é€‰æ‹©**:
   - `LINE_8`: å¿«é€Ÿä½†é”¯é½¿æ˜æ˜¾
   - `LINE_AA`: è´¨é‡é«˜ä½†ç¨æ…¢
4. **åæ ‡æ£€æŸ¥**: ç¡®ä¿åæ ‡åœ¨å›¾åƒèŒƒå›´å†…ï¼Œé¿å…å´©æºƒ

## å¸¸è§é”™è¯¯

1. **åæ ‡é¡ºåºé”™è¯¯**:
   ```cpp
   // é”™è¯¯ï¼šå·¦ä¸Šè§’åœ¨å³ä¸‹è§’ä¹‹å
   rectangle(frame, Point(300,200), Point(100,50), ...);
   ```

2. **é¢œè‰²é€šé“ä¸åŒ¹é…**:
   ```cpp
   // é”™è¯¯ï¼šç°åº¦å›¾ä½¿ç”¨BGRé¢œè‰²
   Mat gray(480,640,CV_8UC1);
   rectangle(gray, ..., Scalar(0,0,255)); // åº”ä½¿ç”¨Scalar(255)
   ```

3. **è¶Šç•Œåæ ‡**:
   ```cpp
   // é”™è¯¯ï¼šåæ ‡è¶…å‡ºå›¾åƒèŒƒå›´
   rectangle(frame, Point(-10,-10), Point(700,500), ...);
   ```

`rectangle()` æ˜¯ OpenCV ä¸­æœ€å¸¸ç”¨çš„ç»˜å›¾å‡½æ•°ä¹‹ä¸€ï¼ŒæŒæ¡å…¶ç”¨æ³•å¯¹äºå›¾åƒæ ‡æ³¨ã€UIå…ƒç´ åˆ›å»ºå’Œå¯è§†åŒ–è‡³å…³é‡è¦ã€‚æ‚¨æä¾›çš„ä»£ç å±•ç¤ºäº†å¦‚ä½•åˆ›å»ºåŠ¨æ€é¢œè‰²å˜åŒ–çš„è¿›åº¦æ¡æ•ˆæœï¼Œè¿™æ˜¯è®¸å¤šè®¡ç®—æœºè§†è§‰åº”ç”¨ä¸­çš„å¸¸è§éœ€æ±‚ã€‚